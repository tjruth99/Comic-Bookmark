(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(84),s=n.n(r),c=(n(92),n(5)),i=n(6),l=n(8),u=n(7),m=n(9),d=n(24),h=n(15),b=(n(93),n(2)),p=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n.listElement=n.listElement.bind(Object(b.a)(Object(b.a)(n))),n.renderList=n.renderList.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"listElement",value:function(e,t,n,a){return o.a.createElement("div",null,o.a.createElement("div",{className:"comicList"},o.a.createElement("h3",null,e," is reading:"),o.a.createElement("h2",null,t),o.a.createElement("h4",null,n," / ",a," issues"),o.a.createElement("p",null,"Current Issue: Issue #1")),o.a.createElement("br",null))}},{key:"renderList",value:function(){for(var e=["Series 1","Series 2","Series 3","Series 4","Series 5"],t=["33","20","120","3","10"],n=[],a=0;a<e.length;a++)n.push(this.listElement("Username",e[a],1,t[a]));return n}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderList())}}]),t}(o.a.Component),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Home Page"),o.a.createElement("p",null,"Display a list of users and what stories they are currently reading and what issue they are on"),o.a.createElement(p,null))}}]),t}(o.a.Component),f=n(16),O=n.n(f),E=n(29),j=n(4),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).startReading=function(e,t){null===n.state.email?alert("You are not signed in"):(console.log("startReading start"),console.log("userID: "+j.auth().currentUser.uid),console.log("seriesName: "+e),fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/startReading",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:j.auth().currentUser.uid,seriesName:e,numIssues:t})}).then(function(e){console.log("startReading end")}).catch(function(e){return console.error("Error: startReading ".concat(e))}))},n.state={username:"",email:"",comicList:[]},n.getComics=n.getComics.bind(Object(b.a)(Object(b.a)(n))),n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n.startReading=n.startReading.bind(Object(b.a)(Object(b.a)(n))),n.listElement=n.listElement.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")}),this.getComics()}},{key:"getComics",value:function(){var e=Object(E.a)(O.a.mark(function e(){var t,n=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/getComics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({})});case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,console.log("data: "+JSON.stringify(t)),this.setState({comicList:t.map(function(e){return n.listElement(e.seriesName,e.numIssues)})});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listElement",value:function(e,t){var n=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"comicList"},o.a.createElement("h2",null,e),o.a.createElement("h4",null,t," issues"),o.a.createElement("button",{type:"button",onClick:function(){return n.startReading(e,t)}},"Start Reading")),o.a.createElement("br",null))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.comicList)}}]),t}(o.a.Component),I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Comics"),o.a.createElement("p",null,"Select a comic to start reading:"),o.a.createElement(v,null))}}]),t}(o.a.Component),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",userID:"",comicList:[]},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n.getUserReadings=n.getUserReadings.bind(Object(b.a)(Object(b.a)(n))),n.getIssueFromSeries=n.getIssueFromSeries.bind(Object(b.a)(Object(b.a)(n))),n.listElement=n.listElement.bind(Object(b.a)(Object(b.a)(n))),n.nextOrRemove=n.nextOrRemove.bind(Object(b.a)(Object(b.a)(n))),n.getIssue=n.getIssue.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){j.auth().onAuthStateChanged(function(e){e&&(this.setState({userID:j.auth().currentUser.uid}),this.getUserReadings())}.bind(this))}},{key:"getUserReadings",value:function(){var e=Object(E.a)(O.a.mark(function e(){var t,n,a=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("getUserReadings"),console.log("userID: "+this.state.userID),e.next=5,fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/getUserReadings",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:this.state.userID})});case 5:return t=e.sent,e.next=8,t.json();case 8:t=e.sent,console.log("data: "+JSON.stringify(t)),n=0;case 11:if(!(n<t.length)){e.next=18;break}return e.next=14,this.getIssueFromSeries(t[n].seriesName,t[n].currentIssue);case 14:t[n].issueName=e.sent;case 15:n++,e.next=11;break;case 18:console.log("data: "+JSON.stringify(t)),this.setState({comicList:t.map(function(e){return a.listElement(e.seriesName,e.currentIssue,e.numIssues,e.issueName)})}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error("Error: getUserReadings ".concat(e.t0));case 25:case"end":return e.stop()}},e,this,[[0,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"getIssue",value:function(e,t){return this.getIssueFromSeries(e,t)}},{key:"getIssueFromSeries",value:function(){var e=Object(E.a)(O.a.mark(function e(t,n){var a,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getIssueFromSeries"),console.log("seriesName: "+t),console.log("issueNumber: "+n),e.next=5,fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/getIssueFromSeries",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({seriesName:t,issueNumber:n})});case 5:return o=e.sent,e.next=8,o.json();case 8:return o=e.sent,a=o.issues[n],e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"prevIssue",value:function(e){console.log("prevIssue"),console.log("userID: "+j.auth().currentUser.uid),console.log("seriesName: "+e),fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/prevIssue",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:j.auth().currentUser.uid,seriesName:e})}).then(function(e){console.log("prevIssue end"),window.location.reload()}).catch(function(e){return console.error("Error: prevIssue ".concat(e))}),window.location.reload()}},{key:"nextOrRemove",value:function(e,t,n){t===n-1?(console.log("REMOVE SERIES"),this.stopReading(e)):this.nextIssue(e)}},{key:"nextIssue",value:function(e){console.log("nextIssue"),console.log("userID: "+j.auth().currentUser.uid),console.log("seriesName: "+e),fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/nextIssue",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:j.auth().currentUser.uid,seriesName:e})}).then(function(e){console.log("nextIssue end"),window.location.reload()}).catch(function(e){return console.error("Error: nextIssue ".concat(e))})}},{key:"stopReading",value:function(e){console.log("stopReading"),console.log("userID: "+j.auth().currentUser.uid),console.log("seriesName: "+e),fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/stopReading",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:j.auth().currentUser.uid,seriesName:e})}).then(function(e){console.log("stopReading end"),window.location.reload()}).catch(function(e){return console.error("Error: nextIssue ".concat(e))})}},{key:"listElement",value:function(e,t,n,a){var r=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"comicList"},o.a.createElement("h2",null,e),o.a.createElement("h4",null,t+1," / ",n," issues"),o.a.createElement("p",null,a),o.a.createElement("button",{type:"button",onClick:function(){return r.prevIssue(e)}},"Prev Issue"),o.a.createElement("div",{className:"divider"}),o.a.createElement("button",{type:"button",onClick:function(){return r.nextOrRemove(e,t,n)}},"Next Issue")),o.a.createElement("br",null))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.comicList)}}]),t}(o.a.Component),S=n(51),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",password:"",userID:"",redirect:!1},n.getUsernameFromID=n.getUsernameFromID.bind(Object(b.a)(Object(b.a)(n))),n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(b.a)(Object(b.a)(n))),n.handleLogIn=n.handleLogIn.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getUsernameFromID",value:function(){var e=Object(E.a)(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getUsernameFromID"),console.log("userID: "+j.auth().currentUser.uid),e.next=4,fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/getUserFromID",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:j.auth().currentUser.uid})});case 4:return t=e.sent,e.next=7,t.json();case 7:t=e.sent,console.log("username data: "+t),console.log(t.username),localStorage.setItem("_username",t.username);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"handleAuthenticationUpdate",value:function(){var e;localStorage.setItem("_userEmail",this.state.email),j.auth().onAuthStateChanged(function(t){t&&(console.log("inside onauthchanged"),console.log(j.auth().currentUser.uid),e=j.auth().currentUser.uid)}),this.setState({userID:e,redirect:!0}),localStorage.setItem("_userID",e),this.getUsernameFromID()}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(S.a)({},n,a))}},{key:"handleLogIn",value:function(){var e=this;console.log("handleLogIn"),j.auth().signInWithEmailAndPassword(this.state.email,this.state.password).then(function(){e.handleAuthenticationUpdate()}).catch(function(e){alert("Error when signing in",e.message),console.log(e.message)})}},{key:"render",value:function(){return this.state.redirect?o.a.createElement(h.a,{to:"/profile"}):o.a.createElement("div",{className:"container"},o.a.createElement("form",null,o.a.createElement("label",null,"Email:",o.a.createElement("input",{type:"text",value:this.state.email,name:"email",onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Password:",o.a.createElement("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:this.handleLogIn},"Log In")))}}]),t}(o.a.Component),D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Login"),o.a.createElement(k,null))}}]),t}(o.a.Component),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).addUserToDatabase=function(){console.log("addUserToDatabase"),console.log("UserID: "+n.state.userID),console.log("username: "+n.state.username),fetch("https://us-central1-comicbookmark-970b7.cloudfunctions.net/addUserToDatabase",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userID:n.state.userID,username:n.state.username})}).then(function(e){console.log("SUCCESS!?")}).catch(function(e){return console.error("Error: addUserToDatabase ".concat(e))})},n.state={username:"",email:"",password:"",userID:"",redirect:!1},n.componentDidUpdate=n.componentDidUpdate.bind(Object(b.a)(Object(b.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(b.a)(Object(b.a)(n))),n.addUserToDatabase=n.addUserToDatabase.bind(Object(b.a)(Object(b.a)(n))),n.handleSignUp=n.handleSignUp.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(S.a)({},n,a))}},{key:"handleSignUp",value:function(){var e=this;console.log("handleSignUp"),j.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then(function(){console.log("Created Account"),e.setState({userID:j.auth().currentUser.uid,redirect:!0}),localStorage.setItem("_username",e.state.username),localStorage.setItem("_userEmail",e.state.email),localStorage.setItem("_userID",e.state.userID),e.addUserToDatabase(),window.location.reload()}).catch(function(e){alert("Error when creating account: "+e.message),console.log(e.message)})}},{key:"render",value:function(){return this.state.redirect?o.a.createElement(h.a,{to:"/profile"}):o.a.createElement("div",{className:"container"},o.a.createElement("form",null,o.a.createElement("label",null,"Username:",o.a.createElement("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Email:",o.a.createElement("input",{type:"text",value:this.state.email,name:"email",onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Password:",o.a.createElement("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{type:"button",onClick:this.handleSignUp},"Create")))}}]),t}(o.a.Component),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"SignUp"),o.a.createElement(C,null))}}]),t}(o.a.Component),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n.componentDidMount=n.componentDidMount.bind(Object(b.a)(Object(b.a)(n))),n.signOut=n.signOut.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"signOut",value:function(){console.log("Sign out"),localStorage.removeItem("_username"),localStorage.removeItem("_userEmail"),localStorage.removeItem("_userID"),this.setState({username:"",email:""}),j.auth().signOut().then(function(){}).catch(function(e){alert("Error when signing out: "+e.message),console.log(e.message)}),window.location.reload()}},{key:"render",value:function(){return null==this.state.email?o.a.createElement("div",null,o.a.createElement("h2",null,"Please Sign In"),o.a.createElement("br",null),o.a.createElement(d.a,null,o.a.createElement(d.b,{to:"/profile/login"},o.a.createElement("button",{name:"loginButton",type:"button",className:"authButton"},"Login")),o.a.createElement("div",{className:"divider"}),o.a.createElement(d.b,{to:"/profile/signup"},o.a.createElement("button",{name:"signupButton",type:"button",className:"authButton"},"Sign-Up")),o.a.createElement(h.b,{path:"/profile/login",component:D}),o.a.createElement(h.b,{path:"/profile/signup",component:w}))):o.a.createElement("div",null,o.a.createElement("h1",null,this.state.username,"'s Profile"),o.a.createElement("h3",null,"Email: ",this.state.email),o.a.createElement("p",null,"What you are currently reading:"),o.a.createElement(y,null),o.a.createElement("button",{type:"button",onClick:this.signOut},"Sign Out"))}}]),t}(o.a.Component),N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:localStorage.getItem("_username"),email:localStorage.getItem("_userEmail")})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(d.a,null,o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"Comic Bookmark"),o.a.createElement("div",null,o.a.createElement(d.b,{to:"/"},o.a.createElement("button",{name:"homeButton",type:"button",className:"navButton"},"Home")),o.a.createElement("div",{className:"divider"}),o.a.createElement(d.b,{to:"/comics"},o.a.createElement("button",{name:"comicsButton",type:"button",className:"navButton"},"Comics")),o.a.createElement("div",{className:"divider"}),o.a.createElement(d.b,{to:"/profile"},o.a.createElement("button",{name:"profileButton",type:"button",className:"navButton"},"Profile"))),o.a.createElement("br",null)),o.a.createElement("div",null,o.a.createElement(h.b,{exact:!0,path:"/",component:g}),o.a.createElement(h.b,{path:"/comics",component:I}),o.a.createElement(h.b,{path:"/profile",component:U}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));j.initializeApp({apiKey:"AIzaSyDFtVfjj31koxhQww3kKKca_B7fsHgLycY",authDomain:"comicbookmark-970b7.firebaseapp.com",databaseURL:"https://comicbookmark-970b7.firebaseio.com",projectId:"comicbookmark-970b7",storageBucket:"comicbookmark-970b7.appspot.com",messagingSenderId:"299485631413"}),s.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,n){e.exports=n(183)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.f6cf3ccc.chunk.js.map